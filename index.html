<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AGSstore</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
  
.hidden {
			display: none;
		}


/* ===== RESET ===== */
			* {
				box-sizing: border-box;
			font-family: 'Poppins', sans-serif;
		}

body {
		margin: 0;
			background: #0f0f0f;
		color: #fff;
	}

/* ===== HEADER ===== */
header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px 40px;
  background: #111;
}


header img {
  height: 38px;
}

/* ===== NAV ===== */
.mainNav {
  display: flex;
  gap: 8px;
}


/* carrinho s√≥ √≠cone */
.cartBtn img {
  width: 22px;
  height: 22px;
}

/* badge */
.cartBadge {
  position: absolute;
  top: -6px;
  right: -6px;
  background: red;
  color: #fff;
  font-size: 11px;
  padding: 2px 6px;
  border-radius: 50%;
}

/* ===== CONTAINER ===== */
.container {
  padding: 14px;
}

/* ===== GRID ===== */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 12px;
}

/* ===== CARD ===== */
.card {
  background: #1a1a1a;
  border-radius: 14px;
  padding: 10px;
  text-align: center;
}

.card img {
  width: 100%;
  height: 120px;
  object-fit: cover;
  border-radius: 10px;
}

.card h3 {
  font-size: 14px;
  margin: 6px 0 4px;
}

.price {
  font-size: 14px;
  font-weight: 600;
  color: #00e5ff;
}

/* ===== BOT√ÉO ===== */
.btn {
  width: 100%;
  border: none;
  padding: 8px;
  border-radius: 10px;
  font-size: 14px;
  background: #00e5ff;
  color: #000;
  cursor: pointer;
}

/* ===== MOBILE ===== */
@media (max-width: 768px) {

  header img {
    height: 32px;
  }


  .grid {
    grid-template-columns: repeat(2, 1fr);
  }

  .card img {
    height: 100px;
  }

  .btn {
    font-size: 13px;
    padding: 7px;
  }

}


#searchInput {
  width: 100%;
  max-width: 400px;
  padding: 12px;
  border-radius: 10px;
  border: none;
  margin-bottom: 20px;
  font-size: 16px;
}

.floating-cart img {
  width: 26px;
  height: 26px;
}

.floating-badge {
  position: absolute;
  top: -4px;
  right: -4px;
  background: red;
  color: #fff;
  font-size: 11px;
  padding: 2px 6px;
  border-radius: 50%;
}

/* s√≥ mobile */
@media (max-width: 768px) {
  .floating-cart {
    display: flex;
  }
}

.card {
  will-change: transform;
}

.card:hover {
  transform: translateY(-4px);
}


/* ===== HEADER PC ===== */
@media (min-width: 1024px) {

  header {
    padding: 28px 60px;
  }

  header img {
    height: 56px;
  }


}

/* ===== BANNER ===== */
.banner {
  width: 90%;
  max-height: 400px;
  overflow: hidden;
  border-radius: 18px;
  margin: 0 auto 30px;
}

.banner img {
  width: 80%;
  height: 400px;
  object-fit: cover;
}

/* ==== baneer mobile ==== */
@media (max-width: 768px) {
  .banner {
    max-height: 220px;
    border-radius: 14px;
  }
}


/* ===== FOOTER ===== */
.footer {
  background: #0b0b0b;
  margin-top: 60px;
  padding: 40px 20px 20px;
  color: #ccc;
}

.footer-content {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
  gap: 30px;
  max-width: 1200px;
  margin: auto;
}

.footer-col h3 {
  color: #00e5ff;
  margin-bottom: 12px;
  font-size: 16px;
}

.footer-col p,
.footer-col a {
  font-size: 14px;
  color: #ccc;
  text-decoration: none;
  display: block;
  margin-bottom: 6px;
}

.footer-col a:hover {
  color: #00e5ff;
}

.footer-bottom {
  text-align: center;
  margin-top: 30px;
  padding-top: 14px;
  border-top: 1px solid #222;
  font-size: 13px;
  color: #777;
}

/* ==== footer mobile ==== */

@media (max-width: 768px) {
  .footer {
    padding: 30px 16px;
  }

  .footer-col h3 {
    font-size: 15px;
  }
}


/* Bot√µes do menu com tamanho igual */


@media (min-width: 1024px) {
  .navBtn {
    min-width: 140px;
  }
}

@media (max-width: 768px) {
  .navBtn {
    min-width: 90px;
    font-size: 12px;
  }
}

.navBtn {
  height: 40px;
}


/* Tela ver produto */
.product-view {
  position: fixed;
  inset: 0;
  background: #0f0f0f;
  z-index: 999;
  overflow-y: auto;
  padding: 16px;
}

.product-view-content {
  max-width: 1100px;
  margin: auto;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 30px;
}

/* Imagem */
.product-image img {
  width: 100%;
  border-radius: 16px;
  background: #1c1c1c;
}

/* Info */
.product-info h1 {
  font-size: 26px;
  margin-bottom: 12px;
}

.description {
  color: #bdbdbd;
  line-height: 1.6;
  margin-bottom: 20px;
}

.price-box {
  margin-bottom: 20px;
}

.price {
  font-size: 28px;
  font-weight: bold;
  color: #00ff88;
}

/* Bot√£o comprar */
.buyBtn {
  width: 100%;
  padding: 14px;
  background: linear-gradient(135deg,#00ff88,#00cc6a);
  border: none;
  border-radius: 14px;
  font-size: 16px;
  font-weight: bold;
  cursor: pointer;
}

/* Voltar */
.backBtn {
  background: none;
  border: none;
  color: #aaa;
  font-size: 14px;
  margin-bottom: 12px;
  cursor: pointer;
}

/* Mobile */
@media (max-width: 768px) {
  .product-view-content {
    grid-template-columns: 1fr;
  }

  .product-info h1 {
    font-size: 22px;
  }

  .price {
    font-size: 24px;
  }
}


/* ===== CARRINHO FLUTUANTE (PC + MOBILE) ===== */
.floating-cart {
  position: fixed;
  right: 18px;
  bottom: 18px;
  width: 58px;
  height: 58px;
  background: #00e5ff;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 2000;
  box-shadow: 0 10px 30px rgba(0,0,0,.4);
  transition: transform .2s ease;
}

.floating-cart:hover {
  transform: scale(1.05);
}

.floating-cart img {
  width: 26px;
  height: 26px;
}

/* badge */
.floating-badge {
  position: absolute;
  top: -4px;
  right: -4px;
  background: red;
  color: #fff;
  font-size: 11px;
  font-weight: 600;
  padding: 2px 6px;
  border-radius: 50%;
}


/* ===== ANIMA√á√ïES ===== */

/* bot√£o */
@keyframes btnPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.08); }
  100% { transform: scale(1); }
}

.add-anim {
  animation: btnPulse .25s ease;
}

/* carrinho */
@keyframes cartShake {
  0% { transform: scale(1); }
  30% { transform: scale(1.1) rotate(-8deg); }
  60% { transform: scale(1.1) rotate(8deg); }
  100% { transform: scale(1); }
}

.cart-anim {
  animation: cartShake .4s ease;
}

/* produto voando */
.fly-img {
  position: fixed;
  width: 50px;
  z-index: 3000;
  pointer-events: none;
  transition: all .6s cubic-bezier(.4,0,.2,1);
}


.navBtn {
  min-width: 110px;
  height: 40px;
  justify-content: center;
  background: #1c1c1c;
  color: #fff;
  padding: 8px 10px;
  border-radius: 10px;
  font-size: 13px;
  text-decoration: none;
  display: flex;
  align-items: center;
  gap: 6px;
}


  </style>
</head>
<body>

<header>


  <img src="agsstore.png" alt="AGSStore">
  <nav class="mainNav">
	<a href="#" onclick="event.preventDefault(); showPage('home')" class="navBtn">
		Loja
	</a>

  <a href="#" onclick="showPage('agsiptv')" class="navBtn">
    AGS IPTV
  </a>



</nav>


</header>

<div class="container">

																						<!-- HOME -->
  <section id="home">
  
		<input id="searchInput" oninput="renderDebounced()" placeholder="üîç Buscar produto">

																						<!-- BANNERS -->

			<!-- AGS IPTV -->
		<div class="grid" id="storeBannersIptv"></div>

		<div class="banner" id="mainBanner">
				<img src="img1.jpg" alt="Banner Loja">
			</div>

		<h2 style="margin-top:40px">Todos os Produtos</h2>
		<div class="grid" id="allProducts"></div>
  </section>

  
																						<!-- PRODUTO -->


																						<!--CARRINHO-->
<section id="cart" class="hidden">
	<h2>Carrinho</h2>
		<div id="cartItems"></div>
	<p id="cartTotal" style="margin-top:15px;font-weight:bold"></p>

	<button class="btn" id="btnFinalizar" onclick="checkout()">
		Finalizar Compra
	</button>


</section>

																						<!-- AGS IPTV -->
 <section id="agsiptv" class="hidden">  
 
 
			<div id="iptvBanners" class="grid"></div>
			
			<div class="grid">
				<div class="card"><img src="iptv-banner1.jpg"></div>
			</div>



			<h2 class="sectionTitle">Planos AGS IPTV</h2>

	<div class="iptvPlans">

		<div class="iptvBtn" onclick="iptvPlan('R$20,00 - 1 usu√°rio / 1 tela')">
			<span>üì∫</span>
				R$ 20,00
			<small>1 usu√°rio<br>1 tela simult√¢nea</small>
		</div>

		<div class="iptvBtn" onclick="iptvPlan('R$30,00 - 1 usu√°rio / 3 telas')">
			<span>üì∫üì∫üì∫</span>
				R$ 30,00
			<small>1 usu√°rio<br>3 telas simult√¢neas</small>
		</div>

		<div class="iptvBtn" onclick="iptvPlan('R$35,00 - 2 usu√°rios / 1 tela cada')">
			<span>üë•</span>
				R$ 35,00
			<small>2 usu√°rios<br>1 tela cada</small>
		</div>

		<div class="iptvBtn" onclick="iptvPlan('R$30,00 - UNITV')">
			<span>üî•</span>
				R$ 30,00
			<small>Plano UNITV</small>
		</div>

	</div>
</section>
 																						<!-- RODAPE--> 
<footer class="footer">
		<div class="footer-content">
		<div class="footer-col">
			<h3>Sobre</h3>
		<p>Marketplace digital com ofertas, servi√ßos IPTV e promo√ß√µes exclusivas.</p>
		</div>

		<div class="footer-col">
			<h3>Links</h3>
				<a href="#" onclick="showPage('home')">Loja</a>
				<a href="#" onclick="showPage('agsiptv')">AGS IPTV</a>
			<a href="#" onclick="showPage('cart')">Carrinho</a>
		</div>

		<div class="footer-col">
			<h3>Atendimento</h3>
			<p>üì≤ WhatsApp</p>
			<p>‚è∞ Atendimento r√°pido</p>
			<p>üîí 100% Confi√°vel</p>
		</div>

  </div>

  <div class="footer-bottom">
    ¬© 2025 ‚Ä¢ Desenvolvido por <strong>Glemerson</strong>
  </div>
</footer>


 																						<!--ver produto--> 
<div id="productDetail" class="product-view hidden">

		<button class="backBtn" onclick="closeProduct()">‚Üê Voltar</button>

	<div class="product-view-content">

		<div class="product-image">
		<img id="detailImage" src="" alt="Produto">
    </div>

		<div class="product-info">
			<h1 id="detailTitle"></h1>

			<p id="detailDescription" class="description"></p>

			<div class="price-box">
			<span id="detailPrice" class="price"></span>
		</div>

		<button class="buyBtn"
			onclick="addToCart(currentProductId, this, document.getElementById('detailImage').src)">
			üõí Adicionar ao carrinho
		</button>

    </div>

  </div>
</div>





<script>

const allProducts = document.getElementById('allProducts');
const cartItems = document.getElementById('cartItems');
const cartTotal = document.getElementById('cartTotal');
const productDetail = document.getElementById('productDetail');



let etapaCheckout = 'carrinho'; 
// carrinho | formulario | pix


// ======= STORAGE =======
const products = JSON.parse(localStorage.getItem('products')) || [
			{id:1,title:'CASE HD',price:35,desc:'Case para HD',imgs: ['case.jpg', 'case2.jpg','case3.jpg']},
	
			{id:2,title:'Cart√£o SD 64GB',price:45,desc:'Cart√£o Sandisk',imgs: ['cardsd.jpg', 'cardsd2.jpg','cardsd3.jpg']},
	
			{id:3,title:'HD 500GB',price:140,desc:'HD Toshiba',imgs: ['hd.jpg', 'hd2.jpg','hd3.jpg']},
	
			{id:4,title:'Tv panasonic',price:450,desc:'tv panasonic smart viera 32 polegadas obs.n√£o ta recebendo sinal de controle remoto mas vai um teclado para substituir',imgs: ['tv.jpg','tv2.jpg','tv3.jpg']},
	
			{id:5,title:'PC Gamer i5 + GTX 550Ti',price:1750,desc:'configura√ß√£o<br> i5 3470 3.20ghz; placa mae b75bu lga 1155; placa de video gtx 550ti; ssd de 240 com windows 11; hd de 1000gb; memoria ram 16gb teclado e mouse com led; monitor 19 polegadas 75hz; coixa de som bluetooth; adaptadores wi-fi e bluetooth; mouse pad. obs.aceito cart√£o',imgs: ['pc.jpg','pc2.jpg','pc3.jpg']}
];

let cart = JSON.parse(localStorage.getItem('cart') || '[]');
let iptvBanners = JSON.parse(localStorage.getItem('iptvBanners') || '[]');

//----------------------------------------------------------------------------------------------------------------------------------------------------------------------




																					//FUN√á√ïES



	function addProduct(){
  const files = images.files;
  const videoFile = video.files[0];

  // üëâ S√ì EXIGE IMAGEM SE FOR NOVO PRODUTO
  if(editingIndex === null && files.length === 0){
    alert('Adicione pelo menos uma imagem');
    return;
  }

  if(files.length > 3){
    alert('M√°ximo de 3 imagens');
    return;
  }

  let imgs = [];
  let videoData = null;
  let total = files.length + (videoFile ? 1 : 0);
  let loaded = 0;

  const finish = () => {
    loaded++;
    if(loaded < total) return;

    const productData = {
      id: editingIndex !== null ? products[editingIndex].id : Date.now(),
      title: title.value,
	  
		price: parseFloat(price.value.replace(',','.')),

      desc: desc.value,
      rating: ratingInput.value,
      imgs: imgs.length ? imgs : (editingIndex !== null ? products[editingIndex].imgs : []),
      video: videoData || (editingIndex !== null ? products[editingIndex].video : null)
    };

    if(editingIndex !== null){
      products[editingIndex] = productData;
      editingIndex = null;
    }else{
      products.push(productData);
    }

		localStorage.setItem('products', JSON.stringify(products));

    // LIMPA CAMPOS
    title.value = '';
    price.value = '';
    desc.value = '';
    images.value = '';
    video.value = '';

    alert('Produto salvo com sucesso!');
    render();
	
  };

  if(videoFile){
    const vr = new FileReader();
    vr.onload = e => { videoData = e.target.result; finish(); };
    vr.readAsDataURL(videoFile);
  }

  if(files.length){
    [...files].forEach(file=>{
      const r = new FileReader();
      r.onload = e => { imgs.push(e.target.result); finish(); };
      r.readAsDataURL(file);
    });
  }else{
    finish();
  }
}

																					//SHOWPAGE
function showPage(id){
  document.querySelectorAll('section').forEach(sec=>{
    sec.classList.add('hidden');
  });

  const page = document.getElementById(id);
  if(page){
    page.classList.remove('hidden');
  }

  if(id === 'cart'){
    etapaCheckout = 'carrinho';
    render(); // üëà ISSO FAZ OS PRODUTOS APARECEREM
  }
}


	function render(){ 
			const search = document.getElementById('searchInput').value.toLowerCase();
			const banner = document.getElementById('mainBanner');

			if (search.trim() !== '') 	{
			banner.classList.add('hidden');
										}
			else	{
			banner.classList.remove('hidden');
					}
  
  // resto do seu render (produtos)

	allProducts.innerHTML = '';
	
products

  .filter(p => p.title.toLowerCase().includes(search))
  .forEach((p, index)=>{

    const card = `
      <div class="card">
			<img src="${p.imgs?.[0] || ''}">
        <h3>${p.title}</h3>
        <p class="price">R$ ${p.price}</p>
        <button class="btn" onclick="openProduct(${p.id})">Ver Produto</button>

		<button class="btn"
			style="margin-top:6px;background:#00ff88"
				onclick="addToCart(${p.id}, this, '${p.imgs?.[0]}')">
			üõí Adicionar
		</button>

      </div>`;

    // Todos os produtos
    allProducts.innerHTML += card;
  });

	updateCartBadge();

let total = 0;
cartItems.innerHTML = '';

cart.forEach((c,index)=>{
  total += Number(c.price);
  cartItems.innerHTML += `
    <div class="card">
      <h4>${c.title}</h4>
      <p>R$ ${c.price}</p>
      <button class="btn" style="background:#ff3d3d;color:#fff"
        onclick="removeFromCart(${index})">
        ‚ùå Remover
      </button>
    </div>
  `;
});

cartTotal.innerText = 'Total: R$ ' + total.toFixed(2);

const btn = document.getElementById('btnFinalizar');

if(btn){
  btn.style.display =
    (cart.length > 0 && etapaCheckout === 'carrinho')
      ? 'block'
      : 'none';
}


}


	function deleteProduct(index){
  if(!confirm('Deseja realmente apagar este produto?')) return;

  products.splice(index,1);
	localStorage.setItem('products', JSON.stringify(products));

  render();
}


	function editProduct(index){
  const p = products[index];

  title.value = p.title;
  price.value = p.price;
  desc.value = p.desc;
  ratingInput.value = p.rating;

  editingIndex = index;
}


	function addToCart(id, btn, img) {
  const product = products.find(p => p.id === id);
  if (!product) return;

  cart.push(product);
  localStorage.setItem('cart', JSON.stringify(cart));

  updateCartBadge();

  if (btn) animateAddToCart(btn, img);
}


																					//CHECKOUT
																					
function checkout(){
  if(cart.length === 0){
    alert('Carrinho vazio!');
    return;
  }

  etapaCheckout = 'formulario';
  renderCarrinhoFormulario();
}

																					//FORMULARIO

	function renderCarrinhoFormulario(){


  document.querySelectorAll('section').forEach(sec=>{
    sec.classList.add('hidden');
  });

  document.getElementById('cart').classList.remove('hidden');

  const btn = document.getElementById('btnFinalizar');
  if(btn) btn.style.display = 'none';

  cartItems.innerHTML = `
    <div class="card" style="max-width:500px;margin:auto">

      <h3>üìã Dados para Entrega</h3>

      <input id="nome" placeholder="üë§ Nome completo"
        oninput="this.value=this.value.replace(/[^a-zA-Z√Ä-√ø\s]/g,'')">

      <input id="contato" placeholder="üìû WhatsApp"
        maxlength="16" inputmode="numeric">

      <input id="cep" placeholder="üìÆ CEP"
        maxlength="9" inputmode="numeric">

      <input id="rua" placeholder="üè† Rua">
      <input id="numero" placeholder="üî¢ N√∫mero">
      <input id="bairro" placeholder="üìç Bairro">

      <button class="btn" style="margin-top:15px" onclick="prontoDados()">
        ‚úÖ Pronto
      </button>

    </div>
  `;

  aplicarMascaras();   // üëà MUITO IMPORTANTE
  cartTotal.innerHTML = '';
}

																					//PIX
	
	function confirmarPix(){
  const d = window.dadosCliente;

  let msg = `üßæ *Pedido Pix*%0A%0A`;
  msg += `üë§ *Nome:* ${d.nome}%0A`;
  msg += `üìû *Contato:* ${d.contato}%0A`;
  msg += `üìç *Endere√ßo:* ${d.rua}, ${d.numero} - ${d.bairro}%0A`;
  msg += `üìÆ CEP: ${d.cep}%0A%0A`;

  let total = 0;
  cart.forEach(c=>{
    msg += `‚Ä¢ ${c.title} - R$ ${c.price}%0A`;
    total += Number(c.price);
  });

  msg += `%0A*Total:* R$ ${total.toFixed(2)}`;

  window.open(
    `https://wa.me/5585988855751?text=${msg}`,
    '_blank'
  );

  cart = [];
  localStorage.removeItem('cart');

  showPage('home');
  render();
}
																					//COPIAR E COLAR PIX

	function copyPixDirect(){
  const chave = '5585988855751';

  navigator.clipboard.writeText(chave).then(()=>{
    alert('Chave Pix copiada!');
  }).catch(()=>{
    // fallback
    const temp = document.createElement('input');
    temp.value = chave;
    document.body.appendChild(temp);
    temp.select();
    document.execCommand('copy');
    document.body.removeChild(temp);
    alert('Chave Pix copiada!');
  });
}


	function removeFromCart(index)	{
			cart.splice(index, 1);
			localStorage.setItem('cart', JSON.stringify(cart));

																		// se carrinho ficar vazio, volta etapa
				if(cart.length === 0)	{
				etapaCheckout = 'carrinho';
										}
	
			updateCartBadge();
			render();
  

									}


	function iptvPlan(plan){
  const msg = encodeURIComponent(
    `Ol√°! Tenho interesse no plano IPTV:\n\n${plan}`
  );

  window.open(
    `https://wa.me/5585988855751?text=${msg}`,
    '_blank'
  );
}


	function addIptvBanner(){
  const file = document.getElementById('iptvBannerInput').files[0];
  if(!file){
    alert('Selecione uma imagem');
    return;
  }

  const reader = new FileReader();
  reader.onload = e=>{
    iptvBanners.push(e.target.result);
    localStorage.setItem('iptvBanners', JSON.stringify(iptvBanners));
    renderIptvBannersAdmin();
    renderIptvBanners();
  };
  reader.readAsDataURL(file);
	}


	function removeIptvBanner(index){
  iptvBanners.splice(index,1);
  localStorage.setItem('iptvBanners', JSON.stringify(iptvBanners));
  renderIptvBannersAdmin();
  renderIptvBanners();
	}


	function renderIptvBanners(){
  const area = document.getElementById('iptvBanners');
  if(!area) return;

  area.innerHTML = '';
  iptvBanners.forEach(b=>{
    area.innerHTML += `
      <div class="card">
        <img src="${b}">
      </div>
    `;
  });
	}


	function showPreview(e,src){
  const preview = document.getElementById('imgPreview');
  const img = preview.querySelector('img');

  img.src = src;
  preview.style.display = 'block';
  preview.style.left = (e.clientX + 20) + 'px';
  preview.style.top = (e.clientY + 20) + 'px';
}


	function hidePreview(){
  document.getElementById('imgPreview').style.display = 'none';
}

	
	function prontoDados(){

  const cepInput = document.getElementById('cep');
  const contatoInput = document.getElementById('contato');

  if(!cepInput || !contatoInput) return;

  if(!/^\d{5}-\d{3}$/.test(cepInput.value)){
    toast('‚ùå CEP inv√°lido');
    cepInput.focus();
    return;
  }

  if(!/^\(\d{2}\) 9 \d{4}-\d{4}$/.test(contatoInput.value)){
    toast('‚ùå WhatsApp inv√°lido');
    contatoInput.focus();
    return;
  }

  /* continua o c√≥digo normal aqui */

  const nome = document.getElementById('nome').value.trim();
  const rua = document.getElementById('rua').value.trim();
  const numero = document.getElementById('numero').value.trim();
  const bairro = document.getElementById('bairro').value.trim();


const contato = contatoInput.value;
const cep = cepInput.value;
if(!nome || !contatoInput.value || !cepInput.value || !rua || !numero || !bairro){

    toast('‚ö†Ô∏è Preencha todos os campos corretamente');
    return;
	
  }

  window.dadosCliente = { nome, contato, cep, rua, numero, bairro };

  paginaPix();
}

																						//PAGINA PIX
	function paginaPix(){
  etapaCheckout = 'pix';

  document.getElementById('btnFinalizar').style.display = 'none';

  let total = 0;
  let resumo = '';

  cart.forEach(c=>{
    total += Number(c.price);
    resumo += `<p>‚Ä¢ ${c.title} - R$ ${c.price}</p>`;
  });

  cartItems.innerHTML = `
    <div class="card" style="text-align:center;max-width:500px;margin:auto">

      <h3>üí≥ Pagamento via Pix</h3>

      ${resumo}

      <p><strong>Total:</strong> R$ ${total.toFixed(2)}</p>

      <img src="pix.jpg"
        style="width:260px;height:300px;margin:20px auto;border-radius:12px;display:block">

      <div style="font-weight:600;margin-bottom:10px">
        Glemerson Santana Santos
      </div>

      <div onclick="copyPixDirect()"
        style="
          display:inline-block;
          padding:12px 20px;
          border:2px dashed #00e5ff;
          border-radius:12px;
          cursor:pointer;
          font-weight:700;
        ">
        5585988855751
      </div>
		</br>
      <button class="btn" style="margin-top:20px" onclick="confirmarPix()">
        ‚úÖ J√° paguei
      </button>

    </div>
  `;
}


	function trocarImagem(src){
  document.getElementById('mainImage').src = src;
}


	function setActiveNav(id){
  document.querySelectorAll('.navBtn').forEach(btn=>{
    btn.classList.remove('active');
  });

  if(id === 'home'){
    document.querySelector('.navBtn:nth-child(1)').classList.add('active');
  }
  if(id === 'agsiptv'){
    document.querySelector('.navBtn:nth-child(2)').classList.add('active');
  }
  if(id === 'cart'){
    document.querySelector('.navBtn:nth-child(3)').classList.add('active');
  }
}


	function toast(msg){
  const t = document.getElementById('toast');
  t.innerHTML = msg;
  t.style.opacity = '1';
  t.style.bottom = '50px';

  setTimeout(()=>{
    t.style.opacity = '0';
    t.style.bottom = '30px';
  },1500);
}


	function validarWhatsapp(){
  const input = document.getElementById('contato');
  if(!input) return false;

  const valor = input.value;

  if(!/^\(\d{2}\) 9 \d{4}-\d{4}$/.test(valor)){
    toast('‚ùå WhatsApp inv√°lido. Ex: (11) 9 1234-5678');
    input.focus();
    return false;
  }
  return true;
}


	function validarCep(){
  const input = document.getElementById('cep');
  if(!input) return false;

  const cep = input.value;

  if(!/^\d{5}-\d{3}$/.test(cep)){
    toast('‚ùå CEP inv√°lido. Use 12345-678');
    input.focus();
    return false;
  }

  // opcional: buscar endere√ßo
  if(typeof buscarCep === 'function'){
    buscarCep();
  }

  return true;
}


	function finalizarPedido(){
  const cepOk = /^\d{5}-\d{3}$/.test(cep.value);
  const telOk = /^\(\d{2}\) 9 \d{4}-\d{4}$/.test(contato.value);

  if(!cepOk || !telOk){
    toast('‚ö†Ô∏è Preencha CEP e WhatsApp corretamente');
    return;
  }

  // continua o fluxo normal
}


	function aplicarMascaras(){

  const cep = document.getElementById('cep');
  const contato = document.getElementById('contato');

  if(cep){
    cep.addEventListener('input', ()=>{
      let v = cep.value.replace(/\D/g,'');
      if(v.length > 5) v = v.replace(/(\d{5})(\d)/,'$1-$2');
      cep.value = v;
    });
  }

  if(contato){
    contato.addEventListener('input', ()=>{
      let v = contato.value.replace(/\D/g,'');

      if(v.length > 0)
        v = v.replace(/^(\d{0,2})/, '($1');

      if(v.length > 3)
        v = v.replace(/^(\(\d{2})(\d)/, '$1) $2');

      if(v.length > 6)
        v = v.replace(/^(\(\d{2}\) \d)(\d)/, '$1 $2');

      if(v.length > 11)
        v = v.replace(/(\d{4})(\d)/, '$1-$2');

      contato.value = v;
    });
  }
}

				let renderTimeout;

	function renderDebounced() {
  clearTimeout(renderTimeout);
  renderTimeout = setTimeout(render, 300);
}



	if(document.getElementById('iptvBannerAdmin')){
  renderIptvBannersAdmin();
}


				let currentProductId = null;

	function openProduct(id) {
		const product = products.find(p => p.id === id);
		if (!product) return;

		currentProductId = id;

		document.getElementById('detailImage').src = product.imgs?.[0] || '';
		document.getElementById('detailTitle').innerText = product.title;
		document.getElementById('detailDescription').innerHTML = product.desc;
		document.getElementById('detailPrice').innerText =
			'R$ ' + product.price.toFixed(2);

		document.getElementById('productDetail').classList.remove('hidden');
		document.body.style.overflow = 'hidden';

	}


	function closeProduct() {
			document.getElementById('productDetail').classList.add('hidden');
			document.body.style.overflow = 'auto';
	}


	function updateCartBadge() {
  const count = cart.length;

  document.querySelectorAll('.floating-badge, .cartBadge').forEach(b=>{
    b.innerText = count;
    b.style.display = count ? 'inline-block' : 'none';
  });
}



	function animateAddToCart(btn, imgSrc) {
  // anima bot√£o
  btn.classList.add('add-anim');
  setTimeout(() => btn.classList.remove('add-anim'), 250);

  // anima carrinho
  const cart = document.getElementById('floatingCart');
  if (cart) {
    cart.classList.add('cart-anim');
    setTimeout(() => cart.classList.remove('cart-anim'), 400);
  }

  // produto voando
	if (imgSrc && cart && btn) {
    const img = document.createElement('img');
    img.src = imgSrc;
    img.className = 'fly-img';

    const rectBtn = btn.getBoundingClientRect();
    const rectCart = cart.getBoundingClientRect();

    img.style.left = rectBtn.left + 'px';
    img.style.top = rectBtn.top + 'px';

    document.body.appendChild(img);

    setTimeout(() => {
      img.style.left = rectCart.left + 'px';
      img.style.top = rectCart.top + 'px';
      img.style.opacity = '0';
      img.style.transform = 'scale(.3)';
    }, 10);

    setTimeout(() => img.remove(), 700);
  }
}





																			// üîê ATALHO SECRETO DO ADMIN
				let secret = '';
				const SECRET_CODE = 'agsadmin'; // <<< MUDE SE QUISER

				document.addEventListener('keydown', (e)=>{
				secret += e.key.toLowerCase();

																		// mant√©m o tamanho do c√≥digo
				if(secret.length > SECRET_CODE.length){
				secret = secret.slice(-SECRET_CODE.length);}

				if(secret === SECRET_CODE){
				secret = '';
				showPage('admin');}
				});

																		// remove qualquer total antigo
				cartTotal.innerHTML = '';
				render();
				renderIptvBanners();
			

</script>
	
	
			<div id="imgPreview" style="
				position:fixed;
					display:none;
						z-index:9999;
							pointer-events:none;">
								<img style="
							width:260px;
						border-radius:14px;
					box-shadow:0 20px 40px rgba(0,0,0,.8);">
			</div>




			<div id="toast" style="
				position:fixed;
					bottom:30px;
						left:50%;
							transform:translateX(-50%);
								background:#111;
									color:#00e5ff;
										padding:14px 20px;
									border-radius:14px;
								font-weight:600;
							box-shadow:0 20px 40px rgba(0,0,0,.6);
						opacity:0;
					pointer-events:none;
				transition:.4s;
			z-index:9999;
		"></div>


							
														<!-- Carrinho flutuante (PC + Mobile) -->
							<div id="floatingCart" class="floating-cart" onclick="showPage('cart')">
									<img src="carri.png" alt="Carrinho">
									<span id="floatingCartBadge" class="floating-badge">0</span>
							</div>



</body>
</html>