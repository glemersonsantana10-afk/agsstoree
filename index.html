<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AGSStore</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

  <style>
:root{
  --bg:#091218;
  --bg-soft:#033455;
  --card:#1a1a22;
  --primary:#7c4dff;
  --secondary:#00e5ff;
  --text:#f8a50a;
  --danger:#ff3d3d;
}

		*{
		box-sizing:border-box;
		font-family:'Poppins', sans-serif;
		}

html, body{
  height:100%;
}

body{
  margin:0;
  display:flex;
  flex-direction:column;
  background:var(--bg);
  color:var(--text);
}
    
	.container{
  padding:30px;
  flex:1;}
  
  
.card img{
  width:100%;
  height:180px;
  object-fit:cover;
  border-radius:8px;
}

    header{padding:20px;display:flex;align-items:center;justify-content:space-between;background:#0b0b0f}
    header img{height:100px;width:330px}
    nav a{color:var(--text);margin-left:5px;text-decoration:none;font-weight:bold}
  
  .grid{
  display:grid;
  grid-template-columns:repeat(5, 1fr);
  gap:20px
}

/* Responsivo */
@media (max-width:1200px){
  .grid{grid-template-columns:repeat(3,1fr)}
}
@media (max-width:768px){
  .grid{grid-template-columns:repeat(2,1fr)}
}
@media (max-width:480px){
  .grid{grid-template-columns:1fr}
}

    .card{
	box-shadow:2px 0px 5px rgba(0,0,0,.4);
	}
    .card img{width:100%;border-radius:5px}
    .btn{display:inline-block;margin-top:12px;padding:20px 20px;border-radius:9px;background:linear-gradient(45deg,var(--primary),var(--secondary));color:#000;font-weight:bold;text-decoration:none;border:none;cursor:pointer}
    .price{color:var(--secondary);font-size:20px;font-weight:bold}
	
    .stars span{color:gold;font-size:18px;cursor:pointer}
    .hidden{display:none}
    input,textarea,select{width:100%;padding:8px;margin:6px 0;border-radius:6px;border:none}
	.fileBtn{
  display:inline-block;
  padding:10px;
  background:#222;
  border:1px dashed var(--secondary);
  border-radius:8px;
  cursor:pointer;
  margin:8px 0;
}
.fileBtn input{display:none}

input, textarea{
  max-width:400px;
}
textarea{
  height:80px;
}

.sectionTitle{
  display:inline-block;
  padding:10px 20px;
  background:linear-gradient(45deg,var(--primary),var(--secondary));
  color:#000;
  border-radius:10px;
  margin-bottom:20px;
}

#admin input,
#admin textarea,
#admin select{
  width:100%;
  max-width:350px;
  margin-bottom:10px;
}

#adminPanel{
  display:flex;
  flex-direction:column;
  gap:12px;
}

#adminPanel input,
#adminPanel textarea,
#adminPanel select{
  width:100%;
  max-width:400px;
}


#admin{
  background:var(--bg-soft);
  border:2px solid var(--primary);
  border-radius:16px;
  padding:30px;
  max-width:900px;
  margin:40px auto;
  box-shadow:0 0 30px rgba(124,77,255,.2);
}
.adminTitle{
  background:linear-gradient(45deg,#ff9800,#ff5722);
  color:#000;
  padding:12px 20px;
  border-radius:12px;
  display:inline-block;
  margin-bottom:20px;
}
#admin .card{
  background:#111;
  border:1px solid #333;
}


.iptvPlans{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
  gap:20px;
  margin-top:30px;
}

.iptvBtn{
  background:linear-gradient(45deg,#00e5ff,#7c4dff);
  color:#000;
  border-radius:16px;
  padding:20px;
  text-align:center;
  font-weight:bold;
  cursor:pointer;
  transition:.3s;
  box-shadow:0 10px 20px rgba(0,0,0,.4);
}

.iptvBtn:hover{
  transform:scale(1.05);
}

.iptvBtn span{
  display:block;
  font-size:26px;
  margin-bottom:10px;
}

.iptvBtn small{
  display:block;
  margin-top:8px;
  font-size:14px;
}

/* ===============================
   LOJA ‚Äì CARDS COM BORDA NEON
================================ */

/* SOMENTE NA LOJA */
#home .grid .card{
  background:linear-gradient(180deg,#0b0f14,#05070b);
  border-radius:18px;
  padding:14px;
  position:relative;
  transition:.35s ease;
  overflow:hidden;
}

/* BORDA NEON */
#home .grid .card::before{
  content:"";
  position:absolute;
  inset:-2px;
  border-radius:20px;
  background:linear-gradient(
    45deg,
    #7c4dff,
    #00e5ff,
    #ff9800,
    #7c4dff
  );
  opacity:.35;
  z-index:-1;
  filter:blur(10px);
  transition:.35s;
}

/* HOVER */
#home .grid .card:hover{
  transform:translateY(-10px) scale(1.04);
}

#home .grid .card:hover::before{
  opacity:1;
  filter:blur(16px);
}

/* CLICK (MOBILE) */
#home .grid .card:active{
  transform:scale(0.97);
}

/* IMAGEM */
#home .grid .card img{
  height:190px;
  object-fit:cover;
  border-radius:14px;
}

/* BOT√ÉO */
#home .grid .card .btn{
  width:100%;
  text-align:center;
}

/* ANIMA√á√ÉO NEON */
@keyframes neonPulse{
  0%{filter:blur(8px)}
  50%{filter:blur(16px)}
  100%{filter:blur(8px)}
}

#home .grid .card::before{
  animation:neonPulse 3s infinite;
}


/* ===============================
   ADMIN ‚Äì GRID ORGANIZADO
================================ */

#adminProducts{
  display:grid;
  grid-template-columns:repeat(5, 1fr); /* 5 por linha */
  gap:20px;
  margin-top:20px;
}

/* RESPONSIVO */
@media (max-width:1400px){
  #adminProducts{
    grid-template-columns:repeat(4, 1fr);
  }
}

@media (max-width:1100px){
  #adminProducts{
    grid-template-columns:repeat(3, 1fr);
  }
}

@media (max-width:768px){
  #adminProducts{
    grid-template-columns:repeat(2, 1fr);
  }
}

@media (max-width:480px){
  #adminProducts{
    grid-template-columns:1fr;
  }
}

footer{
  margin-top:170px;   /* ‚Üê aumenta a dist√¢ncia do conte√∫do */
  background:#000;
  padding:20px;
  text-align:center;
  border-top:1px solid #222;
}



.footerContent{
  max-width:1200px;
  margin:auto;
  padding:30px;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:30px;
  align-items:center;
}

.footerBrand img{
  width:160px;
  margin-bottom:10px;
}

.footerBrand p{
  font-size:14px;
  opacity:.8;
}

.footerLinks h4{
  margin-bottom:10px;
  color:var(--secondary);
}

.footerLinks a,
.footerLinks span{
  display:block;
  color:var(--text);
  text-decoration:none;
  font-size:14px;
  margin-bottom:6px;
  opacity:.85;
  transition:.3s;
}

.footerLinks a:hover{
  color:var(--secondary);
  transform:translateX(4px);
}

.footerBottom{
  text-align:center;
  padding:15px;
  font-size:13px;
  border-top:1px solid rgba(255,255,255,.08);
  opacity:.7;
}

/* RESPONSIVO */
@media(max-width:600px){
  .footerContent{
    text-align:center;
  }
  .footerBrand img{
    margin:auto;
  }
}

/* ===== VER PRODUTO ‚Äì FOCO NA IMAGEM ===== */
.productView.productLeft{
  display:flex;
  gap:20px;              /* deixa tudo mais pr√≥ximo */
  align-items:center;
  justify-content:center;
  max-width:1000px;
  margin:auto;
}

/* BLOCO ESQUERDO */
.leftInfo{
  max-width:360px;
}

.leftInfo h2{
	font-size:50px;
	margin-bottom:40px;
}

.leftInfo .price{
  font-size:30px;
  margin-bottom:10px;
}

.leftInfo .desc{
  opacity:.9;
  margin-bottom:15px;
}

/* BOT√ÉO MAIOR */
.bigBtn{
  width:100%;
  padding:26px;
  font-size:18px;
  border-radius:14px;
}

/* IMAGEM */
.productImage img{
  max-width:320px;
  width:100%;
  border-radius:16px;
}

/* MOBILE */
@media(max-width:900px){
  .productView.productLeft{
    flex-direction:column;
    text-align:center;
  }

  .leftInfo{
    max-width:200%;
  }
}


/* MINIATURAS */
.thumbs{
  margin-top:12px;
  display:flex;
  gap:10px;
  justify-content:center;
}

.thumb{
  width:80px;
  height:80px;
  object-fit:cover;
  border-radius:10px;
  cursor:pointer;
  opacity:.6;
  transition:.2s;
}

.thumb:hover{
  opacity:1;
  transform:scale(1.05);
}

/* ===== ZOOM NA IMAGEM DO PRODUTO ===== */
.productImage{
  overflow:hidden;              /* impede imagem de sair do container */
  border-radius:16px;
}

#mainImage{
  transition: transform .35s ease;
  cursor: zoom-in;
}

/* ZOOM AO PASSAR O MOUSE */
#mainImage:hover{
  transform: scale(1.15);
}


  </style>
</head>
<body>

<header>


  <img src="agsstore.png" alt="AGSStore">
   <nav>
  <a href="#" onclick="showPage('home')">
    <span class="sectionTitle">Loja</span>
  </a>

  <a href="#" onclick="showPage('agsiptv')">
    <span class="sectionTitle">AGS IPTV</span>
  </a>

  <a href="#" onclick="showPage('cart')">
    üõí Carrinho (<span id="cartCount">0</span>)
  </a>
</nav>

</header>

<div class="container">

																						<!-- HOME -->
  <section id="home">
  
		<input 
  type="text" 
  id="searchInput" 
  placeholder="üîç Buscar produto..."
  style="
    max-width:400px;
    padding:12px;
    border-radius:10px;
    border:none;
    margin-bottom:20px;
    font-size:16px;
  "
  oninput="render()"
/>

    <h2>Destaques</h2>
    <div class="grid" id="productList"></div>
	
																						<!-- NOVA √ÅREA: TODOS OS PRODUTOS -->
  <h2 style="margin-top:40px">Todos os Produtos</h2>
  <div class="grid" id="allProducts"></div>
  </section>
  
																						<!-- PRODUTO -->
  <section id="product" class="hidden">
		<button class="btn backBtn" onclick="showPage('home')">Voltar</button>
    <div id="productDetail"></div>
  </section>

																						<!--CARRINHO--!>
<section id="cart" class="hidden">
  <h2>Carrinho</h2>
  <div id="cartItems"></div>
  <p id="cartTotal" style="margin-top:15px;font-weight:bold"></p>

<button class="btn" id="btnFinalizar" onclick="checkout()">
  Finalizar Compra
</button>

</section>

																						<!-- AGS IPTV -->
 <section id="agsiptv" class="hidden">  
	<div id="iptvBanners" class="grid"></div>

  <h2 class="sectionTitle">Planos AGS IPTV</h2>

  <div class="iptvPlans">

    <div class="iptvBtn" onclick="iptvPlan('R$20,00 - 1 usu√°rio / 1 tela')">
      <span>üì∫</span>
      R$ 20,00
      <small>1 usu√°rio<br>1 tela simult√¢nea</small>
    </div>

    <div class="iptvBtn" onclick="iptvPlan('R$30,00 - 1 usu√°rio / 3 telas')">
      <span>üì∫üì∫üì∫</span>
      R$ 30,00
      <small>1 usu√°rio<br>3 telas simult√¢neas</small>
    </div>

    <div class="iptvBtn" onclick="iptvPlan('R$35,00 - 2 usu√°rios / 1 tela cada')">
      <span>üë•</span>
      R$ 35,00
      <small>2 usu√°rios<br>1 tela cada</small>
    </div>

    <div class="iptvBtn" onclick="iptvPlan('R$30,00 - UNITV')">
      <span>üî•</span>
      R$ 30,00
      <small>Plano UNITV</small>
    </div>

  </div>
</section>
   
																						<!-- ADMIN -->
	<section id="admin" class="hidden">
	<div id="adminPanel">


    <h2 class="adminTitle">üîê Painel Administrativo</h2>

    <input id="title" placeholder="T√≠tulo">
    <input id="price" placeholder="Pre√ßo">
    <textarea id="desc" placeholder="Descri√ß√£o"></textarea>
	
			<label>Avalia√ß√£o Inicial</label>
<select id="ratingInput">
  <option value="1">‚≠ê</option>
  <option value="2">‚≠ê‚≠ê</option>
  <option value="3">‚≠ê‚≠ê‚≠ê</option>
  <option value="4">‚≠ê‚≠ê‚≠ê‚≠ê</option>
  <option value="5" selected>‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</option>
</select>
	
    <label class="fileBtn">üì∑ Escolher Imagens (at√© 3) <input type="file" id="images" accept="image/png,image/jpeg" multiple></label>
    <label class="fileBtn">üé• Escolher V√≠deo<input type="file" id="video" accept="video/*"></label>
    <button class="btn" onclick="addProduct()">Cadastrar Produto</button>
	<hr style="margin:30px 0">

<h3>Produtos Cadastrados</h3>
		<div id="adminProducts" class="grid"></div>
		<hr style="margin:40px 0">

<h3>Banners AGS IPTV</h3>

<label class="fileBtn">
  üñºÔ∏è Adicionar Banner IPTV
  <input type="file" id="iptvBannerInput" accept="image/png,image/jpeg">
</label>

<button class="btn" onclick="addIptvBanner()">Adicionar Banner</button>

<div id="iptvBannerAdmin" class="grid"></div>


</div>
  </section>


<footer class="footer">
  <div class="footerContent">

    <div class="footerBrand">
      <img src="agsstore.png" alt="AGSStore">
      <p>Sua loja digital de confian√ßa</p>
    </div>

    <div class="footerLinks">
      <h4>Contato</h4>
      <a href="https://wa.me/5585988855751" target="_blank">üì± WhatsApp</a>
      <a href="https://instagram.com/a.g.s_store" target="_blank">üì∏ Instagram</a>
    </div>

    <div class="footerLinks">
      <h4>Atendimento</h4>
      <span>‚è∞ Seg √† Dom</span>
      <span>üí¨ Suporte r√°pido</span>
    </div>

  </div>

  <div class="footerBottom">
    ¬© <span id="year"></span> AGSStore ‚Äî Todos os direitos reservados
  </div>
</footer>



<script>

let etapaCheckout = 'carrinho'; 
// carrinho | formulario | pix


// ======= STORAGE =======
const products = [
	{id:1,title:'CASE HD',price:35,desc:'Case para HD',imgs: ['case.jpg', 'case2.jpg','case2.jpg']},
	
	{id:2,title:'Cart√£o SD 64GB',price:45,desc:'Cart√£o Sandisk',imgs: ['cardsd.jpg', 'cardsd2.jpg','cardsd3.jpg']},
	
	{id:3,title:'HD 500GB',price:140,desc:'HD Toshiba',imgs: ['hd.jpg', 'hd2.jpg','hd2.jpg']},
	
	{id:4,title:'Tv panasonic',price:450,desc:'tv panasonic smart viera 32 polegadas obs.n√£o ta recebendo sinal de controle remoto mas vai um teclado para substituir',imgs: ['tv.jpg','tv.jpg','tv.jpg']},
	
	{id:5,title:'HD 500GB',price:1750,desc:'configura√ß√£o</br> i5 3470 3.20ghz; placa mae b75bu lga 1155; placa de video gtx 550ti; ssd de 240 com windows 11; hd de 1000gb; memoria ram 16gb teclado e mouse com led; monitor 19 polegadas 75hz; coixa de som bluetooth; adaptadores wi-fi e bluetooth; mouse pad. obs.aceito cart√£o',imgs: ['pc.jpg','pc.jpg','pc.jpg']}
];

let cart = JSON.parse(localStorage.getItem('cart') || '[]');
let iptvBanners = JSON.parse(localStorage.getItem('iptvBanners') || '[]');

// ======= ADMIN =======
let editingIndex = null;

// ======= ELEMENTOS =======
const adminPanel = document.getElementById('adminPanel');








																					//FUN√á√ïES



	function addProduct(){
  const files = images.files;
  const videoFile = video.files[0];

  // üëâ S√ì EXIGE IMAGEM SE FOR NOVO PRODUTO
  if(editingIndex === null && files.length === 0){
    alert('Adicione pelo menos uma imagem');
    return;
  }

  if(files.length > 3){
    alert('M√°ximo de 3 imagens');
    return;
  }

  let imgs = [];
  let videoData = null;
  let total = files.length + (videoFile ? 1 : 0);
  let loaded = 0;

  const finish = () => {
    loaded++;
    if(loaded < total) return;

    const productData = {
      id: editingIndex !== null ? products[editingIndex].id : Date.now(),
      title: title.value,
      price: price.value,
      desc: desc.value,
      rating: ratingInput.value,
      imgs: imgs.length ? imgs : (editingIndex !== null ? products[editingIndex].imgs : []),
      video: videoData || (editingIndex !== null ? products[editingIndex].video : null)
    };

    if(editingIndex !== null){
      products[editingIndex] = productData;
      editingIndex = null;
    }else{
      products.push(productData);
    }

		//localStorage.setItem('products', JSON.stringify(products));

    // LIMPA CAMPOS
    title.value = '';
    price.value = '';
    desc.value = '';
    images.value = '';
    video.value = '';

    alert('Produto salvo com sucesso!');
    showPage('admin');
    render();
    renderAdmin();
  };

  if(videoFile){
    const vr = new FileReader();
    vr.onload = e => { videoData = e.target.result; finish(); };
    vr.readAsDataURL(videoFile);
  }

  if(files.length){
    [...files].forEach(file=>{
      const r = new FileReader();
      r.onload = e => { imgs.push(e.target.result); finish(); };
      r.readAsDataURL(file);
    });
  }else{
    finish();
  }
}


	function showPage(id){
  // esconde todas as sections
  document.querySelectorAll('section').forEach(sec=>{
    sec.classList.add('hidden');
  });

  // mostra a section desejada
  const page = document.getElementById(id);
  if(page){
    page.classList.remove('hidden');
  }

  // üîª CONTROLE DO FOOTER (opcional)
  const footer = document.querySelector('footer');
  if(footer){
    footer.style.display = (id === 'cart') ? 'none' : 'block';
  }

  // üîª CONTROLE DO BOT√ÉO FINALIZAR
  const btn = document.getElementById('btnFinalizar');
  if(btn){
    btn.style.display =
      (id === 'cart' && etapaCheckout === 'carrinho' && cart.length > 0)
        ? 'block'
        : 'none';
  }
}


	function render(){
  productList.innerHTML = '';
  allProducts.innerHTML = '';

  const search = document.getElementById('searchInput')?.value.toLowerCase() || '';

products
  .filter(p => p.title.toLowerCase().includes(search))
  .forEach((p, index)=>{

    const card = `
      <div class="card">
			<img src="${p.imgs?.[0] || ''}">
        <h3>${p.title}</h3>
        <p class="price">R$ ${p.price}</p>
        <button class="btn" onclick="openProduct(${p.id})">Ver Produto</button>
      </div>`;

    // Exemplo: primeiros 4 s√£o destaques
    if(index < 4){
      productList.innerHTML += card;
    }
	
    // Todos os produtos
    allProducts.innerHTML += card;
  });

  cartCount.innerText = cart.length;

let total = 0;
cartItems.innerHTML = '';

cart.forEach((c,index)=>{
  total += Number(c.price);
  cartItems.innerHTML += `
    <div class="card">
      <h4>${c.title}</h4>
      <p>R$ ${c.price}</p>
      <button class="btn" style="background:#ff3d3d;color:#fff"
        onclick="removeFromCart(${index})">
        ‚ùå Remover
      </button>
    </div>
  `;
});

cartTotal.innerText = 'Total: R$ ' + total.toFixed(2);

const btn = document.getElementById('btnFinalizar');

if(btn){
  btn.style.display =
    (etapaCheckout === 'carrinho' && cart.length > 0)
    ? 'block'
    : 'none';
}
}


	function renderAdmin(){
  const adminProducts = document.getElementById('adminProducts');
  adminProducts.innerHTML = '';

  if(products.length === 0){
    adminProducts.innerHTML = '<p>Nenhum produto cadastrado.</p>';
    return;
  }

 [...products]
  .sort((a,b)=>b.id - a.id) // mais recente primeiro
  .forEach((p, index)=>{

    adminProducts.innerHTML += `
      <div class="card">
        <img src="${p.imgs[0]}"
		onmousemove="showPreview(event,'${p.imgs[0]}')"
		onmouseleave="hidePreview()">

        <h3>${p.title}</h3>
        <p class="price">R$ ${p.price}</p>

        <button class="btn" onclick="editProduct(${index})">
          ‚úèÔ∏è Editar
        </button>

        <button class="btn"
          style="background:#ff3d3d;color:#fff"
          onclick="deleteProduct(${index})">
          üóëÔ∏è Apagar
        </button>
      </div>
    `;
  });
}


	function deleteProduct(index){
  if(!confirm('Deseja realmente apagar este produto?')) return;

  products.splice(index,1);
	//localStorage.setItem('products', JSON.stringify(products));

  renderAdmin();
  render();
}


	function editProduct(index){
  const p = products[index];

  title.value = p.title;
  price.value = p.price;
  desc.value = p.desc;
  ratingInput.value = p.rating;

  editingIndex = index;

  showPage('admin');
}


	function openProduct(id){
  const p = products.find(x => x.id === id);
  if(!p) return;

  const thumbs = p.imgs.slice(0,3).map((img, i) =>
    `<img src="${img}" onclick="trocarImagem('${img}')" class="thumb">`
  ).join('');

  productDetail.innerHTML = `
    <div class="productView productLeft">

      <!-- INFO + BOT√ÉO -->
      <div class="productInfo leftInfo">
        <h2>${p.title}</h2>
        <p class="price">R$ ${p.price}</p>
        <p class="desc">${p.desc}</p>

        <button class="btn bigBtn" onclick="addToCart(${id})">
          üõí Adicionar ao Carrinho
        </button>
      </div>

      <!-- IMAGEM -->
      <div class="productImage">
        <img id="mainImage" src="${p.imgs[0]}">

        <div class="thumbs">
          ${thumbs}
        </div>
      </div>

    </div>
  `;

  showPage('product');
}



	function addToCart(id){
  cart.push(products.find(p=>p.id===id));
  localStorage.setItem('cart',JSON.stringify(cart));
  alert('Adicionado ao carrinho');
  render();
}
																					//CHECKOUT
																					
	function checkout(){
  if(cart.length === 0){
    alert('Carrinho vazio!');
    return;
  }

  etapaCheckout = 'formulario';
  renderCarrinhoFormulario();
}
																					//FORMULARIO

	function renderCarrinhoFormulario(){
  showPage('cart');

  const btn = document.getElementById('btnFinalizar');
  if(btn) btn.style.display = 'none';

  cartItems.innerHTML = `
    <div class="card" style="max-width:500px;margin:auto">

      <h3>üìã Dados para Entrega</h3>

      <input id="nome" placeholder="üë§ Nome completo">
      <input id="contato" placeholder="üìû WhatsApp">
      <input id="cep" placeholder="üìÆ CEP" onblur="buscarCep()">
      <input id="rua" placeholder="üè† Rua">
      <input id="numero" placeholder="üî¢ N√∫mero">
      <input id="bairro" placeholder="üìç Bairro">

      <button class="btn" style="margin-top:15px" onclick="prontoDados()">
        ‚úÖ Pronto
      </button>

    </div>
  `;

  cartTotal.innerHTML = '';
}
																					//PIX
	
	function confirmarPix(){
  const d = window.dadosCliente;

  let msg = `üßæ *Pedido Pix*%0A%0A`;
  msg += `üë§ *Nome:* ${d.nome}%0A`;
  msg += `üìû *Contato:* ${d.contato}%0A`;
  msg += `üìç *Endere√ßo:* ${d.rua}, ${d.numero} - ${d.bairro}%0A`;
  msg += `üìÆ CEP: ${d.cep}%0A%0A`;

  let total = 0;
  cart.forEach(c=>{
    msg += `‚Ä¢ ${c.title} - R$ ${c.price}%0A`;
    total += Number(c.price);
  });

  msg += `%0A*Total:* R$ ${total.toFixed(2)}`;

  window.open(
    `https://wa.me/5585988855751?text=${msg}`,
    '_blank'
  );

  cart = [];
  localStorage.removeItem('cart');

  showPage('home');
  render();
}
																					//COPIAR E COLAR PIX

	function copyPixDirect(){
  const chave = '5585988855751';

  navigator.clipboard.writeText(chave).then(()=>{
    alert('Chave Pix copiada!');
  }).catch(()=>{
    // fallback
    const temp = document.createElement('input');
    temp.value = chave;
    document.body.appendChild(temp);
    temp.select();
    document.execCommand('copy');
    document.body.removeChild(temp);
    alert('Chave Pix copiada!');
  });
}


	function removeFromCart(index){
  cart.splice(index, 1);
  localStorage.setItem('cart', JSON.stringify(cart));

  // se carrinho ficar vazio, volta etapa
  if(cart.length === 0){
    etapaCheckout = 'carrinho';
  }

  render();
}


	function iptvPlan(plan){
  const msg = encodeURIComponent(
    `Ol√°! Tenho interesse no plano IPTV:\n\n${plan}`
  );

  window.open(
    `https://wa.me/5585988855751?text=${msg}`,
    '_blank'
  );
}


	function addIptvBanner(){
  const file = document.getElementById('iptvBannerInput').files[0];
  if(!file){
    alert('Selecione uma imagem');
    return;
  }

  const reader = new FileReader();
  reader.onload = e=>{
    iptvBanners.push(e.target.result);
    localStorage.setItem('iptvBanners', JSON.stringify(iptvBanners));
    renderIptvBannersAdmin();
    renderIptvBanners();
  };
  reader.readAsDataURL(file);
	}


	function renderIptvBannersAdmin(){
  const area = document.getElementById('iptvBannerAdmin');
  area.innerHTML = '';

  iptvBanners.forEach((b,index)=>{
    area.innerHTML += `
      <div class="card">
        <img src="${b}">
        <button class="btn" style="background:#ff3d3d;color:#fff"
          onclick="removeIptvBanner(${index})">
          üóëÔ∏è Remover
        </button>
      </div>
    `;
  });
	}


	function removeIptvBanner(index){
  iptvBanners.splice(index,1);
  localStorage.setItem('iptvBanners', JSON.stringify(iptvBanners));
  renderIptvBannersAdmin();
  renderIptvBanners();
	}


	function renderIptvBanners(){
  const area = document.getElementById('iptvBanners');
  if(!area) return;

  area.innerHTML = '';
  iptvBanners.forEach(b=>{
    area.innerHTML += `
      <div class="card">
        <img src="${b}">
      </div>
    `;
  });
	}


	function showPreview(e,src){
  const preview = document.getElementById('imgPreview');
  const img = preview.querySelector('img');

  img.src = src;
  preview.style.display = 'block';
  preview.style.left = (e.clientX + 20) + 'px';
  preview.style.top = (e.clientY + 20) + 'px';
}


	function hidePreview(){
  document.getElementById('imgPreview').style.display = 'none';
}


	function buscarCep(){
  const cep = document.getElementById('cep').value.replace(/\D/g,'');

  if(cep.length !== 8){
    alert('CEP inv√°lido');
    return;
  }

  fetch(`https://viacep.com.br/ws/${cep}/json/`)
    .then(r => r.json())
    .then(data => {
      if(data.erro){
        alert('CEP n√£o encontrado');
        return;
      }

      document.getElementById('rua').value = data.logradouro;
      document.getElementById('bairro').value = data.bairro;
    });
}


	function prontoDados(){
  const nome = document.getElementById('nome').value.trim();
  const contato = document.getElementById('contato').value.trim();
  const cep = document.getElementById('cep').value.trim();
  const rua = document.getElementById('rua').value.trim();
  const numero = document.getElementById('numero').value.trim();
  const bairro = document.getElementById('bairro').value.trim();

  if(!nome || !contato || !cep || !rua || !numero || !bairro){
    alert('Preencha todos os campos');
    return;
  }

  window.dadosCliente = { nome, contato, cep, rua, numero, bairro };

  paginaPix();
}

																						//PAGINA PIX
	function paginaPix(){
  etapaCheckout = 'pix';

  document.getElementById('btnFinalizar').style.display = 'none';

  let total = 0;
  let resumo = '';

  cart.forEach(c=>{
    total += Number(c.price);
    resumo += `<p>‚Ä¢ ${c.title} - R$ ${c.price}</p>`;
  });

  cartItems.innerHTML = `
    <div class="card" style="text-align:center;max-width:500px;margin:auto">

      <h3>üí≥ Pagamento via Pix</h3>

      ${resumo}

      <p><strong>Total:</strong> R$ ${total.toFixed(2)}</p>

      <img src="pix.jpg"
        style="width:260px;height:300px;margin:20px auto;border-radius:12px;display:block">

      <div style="font-weight:600;margin-bottom:10px">
        Glemerson Santana Santos
      </div>

      <div onclick="copyPixDirect()"
        style="
          display:inline-block;
          padding:12px 20px;
          border:2px dashed #00e5ff;
          border-radius:12px;
          cursor:pointer;
          font-weight:700;
        ">
        5585988855751
      </div>
		</br>
      <button class="btn" style="margin-top:20px" onclick="confirmarPix()">
        ‚úÖ J√° paguei
      </button>

    </div>
  `;
}


	function trocarImagem(src){
  document.getElementById('mainImage').src = src;
}


// üîê ATALHO SECRETO DO ADMIN
let secret = '';
const SECRET_CODE = 'agsadmin'; // <<< MUDE SE QUISER

document.addEventListener('keydown', (e)=>{
  secret += e.key.toLowerCase();

  // mant√©m o tamanho do c√≥digo
  if(secret.length > SECRET_CODE.length){
    secret = secret.slice(-SECRET_CODE.length);
  }

  if(secret === SECRET_CODE){
    secret = '';
    showPage('admin');
  }
});

  // remove qualquer total antigo
  cartTotal.innerHTML = '';
  render();
  renderIptvBanners();
	renderIptvBannersAdmin();

</script>
	
	
	<div id="imgPreview" style="
	position:fixed;
	display:none;
	z-index:9999;
	pointer-events:none;
	">
	<img style="
    width:260px;
    border-radius:14px;
    box-shadow:0 20px 40px rgba(0,0,0,.8);
	">
	</div>

</body>
</html>